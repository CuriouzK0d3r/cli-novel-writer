<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
    <title>Writers CLI</title>

    <!-- Main Styles -->
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/themes.css">
    <link rel="stylesheet" href="../../styles/components.css">
    <link rel="stylesheet" href="../../styles/editor.css">
    <link rel="stylesheet" href="../../styles/sidebar.css">
    <link rel="stylesheet" href="../../styles/modals.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="theme-dark" data-platform="electron">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Writers CLI</h2>
            <p>Loading your writing environment...</p>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="app" class="app hidden">
        <!-- Title Bar (Custom on Windows/Linux) -->
        <div id="titlebar" class="titlebar" data-platform-specific>
            <div class="titlebar-content">
                <div class="titlebar-title">
                    <span id="window-title">Writers CLI</span>
                </div>
                <div class="titlebar-controls">
                    <button id="minimize-btn" class="titlebar-btn" title="Minimize">
                        <svg width="12" height="12" viewBox="0 0 12 12">
                            <rect x="0" y="5" width="12" height="2"/>
                        </svg>
                    </button>
                    <button id="maximize-btn" class="titlebar-btn" title="Maximize">
                        <svg width="12" height="12" viewBox="0 0 12 12">
                            <rect x="0" y="0" width="12" height="12" fill="none" stroke="currentColor" stroke-width="1"/>
                        </svg>
                    </button>
                    <button id="close-btn" class="titlebar-btn close" title="Close">
                        <svg width="12" height="12" viewBox="0 0 12 12">
                            <path d="M0 0 L12 12 M12 0 L0 12" stroke="currentColor" stroke-width="1"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Application Layout -->
        <div class="app-layout">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar">
                <div class="sidebar-header">
                    <div class="sidebar-brand">
                        <h1>Writers CLI</h1>
                        <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle Sidebar">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <path d="M3 4h10v1H3zM3 7h10v1H3zM3 10h10v1H3z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="sidebar-content">
                    <!-- Navigation Tabs -->
                    <div class="nav-tabs">
                        <button class="nav-tab active" data-tab="files">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <path d="M4 2h4l2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>
                            </svg>
                            <span>Files</span>
                        </button>
                        <button class="nav-tab" data-tab="project">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <path d="M2 3h12v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3zm10-1V1a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v1"/>
                            </svg>
                            <span>Project</span>
                        </button>
                        <button class="nav-tab" data-tab="stats">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <path d="M2 13V3h2v10H2zm4-6v6h2V7H6zm4-4v10h2V3h-2z"/>
                            </svg>
                            <span>Stats</span>
                        </button>
                    </div>

                    <!-- Tab Content Panels -->
                    <div class="tab-content">
                        <!-- Files Tab -->
                        <div id="files-tab" class="tab-pane active">
                            <div class="section">
                                <div class="section-header">
                                    <h3>Recent Files</h3>
                                    <button class="btn-icon" id="new-file-btn" title="New File">
                                        <svg width="16" height="16" viewBox="0 0 16 16">
                                            <path d="M8 2v12M2 8h12"/>
                                        </svg>
                                    </button>
                                </div>
                                <div id="recent-files" class="file-list"></div>
                            </div>

                            <div class="section">
                                <div class="section-header">
                                    <h3>Quick Actions</h3>
                                </div>
                                <div class="quick-actions">
                                    <button class="quick-action" id="open-file-btn">
                                        <svg width="20" height="20" viewBox="0 0 20 20">
                                            <path d="M3 3h8l2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/>
                                        </svg>
                                        Open File
                                    </button>
                                    <button class="quick-action" id="open-project-btn">
                                        <svg width="20" height="20" viewBox="0 0 20 20">
                                            <path d="M2 5h16v12a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5zm14-2V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v1"/>
                                        </svg>
                                        Open Project
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Project Tab -->
                        <div id="project-tab" class="tab-pane">
                            <div id="project-content">
                                <div class="empty-state">
                                    <svg width="48" height="48" viewBox="0 0 48 48">
                                        <path d="M8 8h24l8 8v24a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4V12a4 4 0 0 1 4-4z" fill="none" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                    <h3>No Project Open</h3>
                                    <p>Open a project to see its structure and files</p>
                                    <button class="btn btn-primary" id="create-project-btn">Create Project</button>
                                </div>
                            </div>
                        </div>

                        <!-- Statistics Tab -->
                        <div id="stats-tab" class="tab-pane">
                            <div id="stats-content">
                                <div class="stats-overview">
                                    <div class="stat-card">
                                        <h4>Words Today</h4>
                                        <div class="stat-value" id="words-today">0</div>
                                    </div>
                                    <div class="stat-card">
                                        <h4>Total Words</h4>
                                        <div class="stat-value" id="total-words">0</div>
                                    </div>
                                    <div class="stat-card">
                                        <h4>Writing Time</h4>
                                        <div class="stat-value" id="writing-time">0m</div>
                                    </div>
                                </div>

                                <div class="writing-goal">
                                    <h4>Daily Goal</h4>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="goal-progress" style="width: 0%"></div>
                                    </div>
                                    <div class="progress-text">
                                        <span id="goal-current">0</span> / <span id="goal-target">500</span> words
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Toolbar -->
                <div id="toolbar" class="toolbar">
                    <div class="toolbar-left">
                        <div class="breadcrumb" id="file-breadcrumb">
                            <span class="breadcrumb-item">No file open</span>
                        </div>
                    </div>

                    <div class="toolbar-center">
                        <div class="mode-indicator" id="mode-indicator">
                            <span class="mode-text">INSERT</span>
                        </div>
                    </div>

                    <div class="toolbar-right">
                        <button class="btn-icon" id="find-btn" title="Find (Ctrl+F)">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <circle cx="7" cy="7" r="5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                                <path d="m13 13 3 3"/>
                            </svg>
                        </button>
                        <button class="btn-icon" id="settings-btn" title="Settings">
                            <svg width="16" height="16" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="3" fill="none" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 1v2m0 10v2m7-7h-2M3 8H1m11.5-4.5l-1.4 1.4M6.9 9.1l-1.4 1.4m8-1.4l-1.4-1.4M6.9 6.9L5.5 5.5"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Content Views -->
                <div class="content-container">
                    <!-- Welcome View -->
                    <div id="welcome-view" class="content-view active">
                        <div class="welcome-content">
                            <div class="welcome-header">
                                <h1>Welcome to Writers CLI</h1>
                                <p>A modern writing environment for novelists and storytellers</p>
                            </div>

                            <div class="welcome-actions">
                                <div class="action-group">
                                    <h3>Get Started</h3>
                                    <div class="action-buttons">
                                        <button class="action-btn" id="welcome-new-file">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>
                                            </svg>
                                            <div class="action-info">
                                                <h4>New File</h4>
                                                <p>Start writing immediately</p>
                                            </div>
                                        </button>

                                        <button class="action-btn" id="welcome-open-file">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M3 7h12l4 4v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"/>
                                            </svg>
                                            <div class="action-info">
                                                <h4>Open File</h4>
                                                <p>Continue existing work</p>
                                            </div>
                                        </button>

                                        <button class="action-btn" id="welcome-create-project">
                                            <svg width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M4 4h16v16a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4z"/>
                                            </svg>
                                            <div class="action-info">
                                                <h4>Create Project</h4>
                                                <p>Organize a larger work</p>
                                            </div>
                                        </button>
                                    </div>
                                </div>

                                <div class="recent-section" id="welcome-recent">
                                    <h3>Recent Files</h3>
                                    <div class="recent-list" id="welcome-recent-list">
                                        <div class="empty-recent">
                                            <p>No recent files</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Editor View -->
                    <div id="editor-view" class="content-view">
                        <div class="editor-container">
                            <div class="editor-wrapper">
                                <textarea
                                    id="editor"
                                    class="editor"
                                    placeholder="Start writing..."
                                    spellcheck="true"
                                    wrap="soft"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Bar -->
                <div id="status-bar" class="status-bar">
                    <div class="status-left">
                        <span id="file-status" class="status-item">Ready</span>
                        <span id="save-status" class="status-item">
                            <svg width="12" height="12" viewBox="0 0 12 12" class="save-icon">
                                <circle cx="6" cy="6" r="2"/>
                            </svg>
                            Saved
                        </span>
                    </div>

                    <div class="status-center">
                        <span id="selection-info" class="status-item hidden"></span>
                    </div>

                    <div class="status-right">
                        <span id="cursor-position" class="status-item">Ln 1, Col 1</span>
                        <span id="word-count" class="status-item">0 words</span>
                        <span id="char-count" class="status-item">0 chars</span>
                        <span id="reading-time" class="status-item">0m read</span>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <!-- Modals will be dynamically inserted here -->
    </div>

    <!-- Notification Container -->
    <div id="notifications" class="notifications"></div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden"></div>

    <!-- Scripts -->
    <script src="./utils/helpers.js"></script>
    <script src="./utils/keyboard.js"></script>
    <script src="./utils/storage.js"></script>
    <script src="./services/FileManager.js"></script>
    <script src="./services/ProjectManager.js"></script>
    <script src="./services/StatsManager.js"></script>
    <script src="./services/ThemeManager.js"></script>
    <script src="./services/SettingsManager.js"></script>
    <script src="./components/Editor.js"></script>
    <script src="./components/Sidebar.js"></script>
    <script src="./components/StatusBar.js"></script>
    <script src="./components/Toolbar.js"></script>
    <script src="./components/Modal.js"></script>
    <script src="./components/Notification.js"></script>
    <script src="./components/ContextMenu.js"></script>
    <script src="./app.js"></script>
</body>
</html>
