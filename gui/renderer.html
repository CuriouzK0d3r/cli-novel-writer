<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Writers CLI</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
                background: #1e1e1e;
                color: #d4d4d4;
                overflow: hidden;
                height: 100vh;
            }

            .editor-container {
                display: flex;
                flex-direction: column;
                height: 100vh;
            }

            .toolbar {
                background: #2d2d30;
                border-bottom: 1px solid #3e3e42;
                padding: 8px 16px;
                display: flex;
                align-items: center;
                gap: 16px;
                min-height: 40px;
                transition: all 0.3s ease;
            }

            .toolbar.hidden {
                transform: translateY(-100%);
                opacity: 0;
            }

            .mode-indicator {
                background: #007acc;
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: bold;
                text-transform: uppercase;
            }

            .mode-indicator.navigation {
                background: #f39c12;
            }

            .file-info {
                font-size: 12px;
                color: #888;
            }

            .editor-area {
                flex: 1;
                position: relative;
                overflow: hidden;
            }

            .editor {
                width: 100%;
                height: 100%;
                background: #1e1e1e;
                color: #d4d4d4;
                border: none;
                outline: none;
                font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
                font-size: 14px;
                line-height: 1.6;
                padding: 20px;
                resize: none;
                white-space: pre-wrap;
                word-wrap: break-word;
                tab-size: 4;
            }

            .editor:focus {
                outline: none;
            }

            .status-bar {
                background: #007acc;
                color: white;
                padding: 6px 16px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-size: 12px;
                min-height: 32px;
                transition: all 0.3s ease;
            }

            .status-bar.hidden {
                transform: translateY(100%);
                opacity: 0;
            }

            .status-left {
                display: flex;
                gap: 16px;
            }

            .status-right {
                display: flex;
                gap: 16px;
            }

            /* Modal Styles */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            }

            .modal {
                background: #2d2d30;
                border: 1px solid #3e3e42;
                border-radius: 8px;
                padding: 24px;
                min-width: 400px;
                max-width: 80vw;
            }

            .modal h2 {
                margin-bottom: 16px;
                color: #d4d4d4;
                font-size: 18px;
            }

            .modal input,
            .modal textarea {
                width: 100%;
                background: #3c3c3c;
                border: 1px solid #555;
                color: #d4d4d4;
                padding: 8px 12px;
                border-radius: 4px;
                font-family: inherit;
                margin-bottom: 12px;
            }

            .modal input:focus,
            .modal textarea:focus {
                outline: none;
                border-color: #007acc;
            }

            .modal-buttons {
                display: flex;
                gap: 8px;
                justify-content: flex-end;
                margin-top: 16px;
            }

            .btn {
                padding: 8px 16px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-family: inherit;
                font-size: 12px;
            }

            .btn-primary {
                background: #007acc;
                color: white;
            }

            .btn-secondary {
                background: #555;
                color: #d4d4d4;
            }

            .btn:hover {
                opacity: 0.9;
            }

            /* Distraction-free mode */
            .distraction-free .toolbar,
            .distraction-free .status-bar {
                display: none;
            }

            .distraction-free .editor {
                padding: 60px;
                font-size: 16px;
                line-height: 1.8;
                max-width: 800px;
                margin: 0 auto;
            }

            /* Search highlight */
            .search-highlight {
                background: #ffd700;
                color: #000;
            }

            .search-current {
                background: #ff6b35;
                color: #fff;
            }

            /* Cursor position indicator */
            .cursor-info {
                font-family: monospace;
            }

            /* Loading indicator */
            .loading {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #2d2d30;
                padding: 20px;
                border-radius: 8px;
                border: 1px solid #3e3e42;
                display: none;
            }

            /* Help content */
            .help-content {
                max-height: 60vh;
                overflow-y: auto;
                line-height: 1.6;
            }

            .help-content h3 {
                color: #007acc;
                margin: 16px 0 8px 0;
            }

            .help-content table {
                width: 100%;
                border-collapse: collapse;
                margin: 12px 0;
            }

            .help-content th,
            .help-content td {
                padding: 8px 12px;
                text-align: left;
                border-bottom: 1px solid #3e3e42;
            }

            .help-content th {
                background: #3c3c3c;
                font-weight: bold;
            }

            .help-content kbd {
                background: #3c3c3c;
                border: 1px solid #555;
                border-radius: 3px;
                padding: 2px 6px;
                font-family: monospace;
                font-size: 11px;
            }
        </style>
    </head>
    <body>
        <div class="editor-container">
            <div class="toolbar">
                <div class="mode-indicator" id="modeIndicator">INSERT</div>
                <div class="file-info" id="fileInfo">Untitled</div>
            </div>

            <div class="editor-area">
                <textarea
                    class="editor"
                    id="editor"
                    placeholder="Start typing your story..."
                    spellcheck="false"
                ></textarea>
            </div>

            <div class="status-bar">
                <div class="status-left">
                    <span id="cursorPos">Ln 1, Col 1</span>
                    <span id="selection"></span>
                </div>
                <div class="status-right">
                    <span id="wordCount">0 words</span>
                    <span id="charCount">0 chars</span>
                    <span id="saveStatus"></span>
                </div>
            </div>
        </div>

        <!-- Find Modal -->
        <div class="modal-overlay" id="findModal">
            <div class="modal">
                <h2>Find</h2>
                <input type="text" id="findInput" placeholder="Find text..." />
                <div class="modal-buttons">
                    <button
                        class="btn btn-secondary"
                        onclick="closeFindModal()"
                    >
                        Cancel
                    </button>
                    <button class="btn btn-primary" onclick="findNext()">
                        Find Next
                    </button>
                    <button class="btn btn-primary" onclick="findPrevious()">
                        Find Previous
                    </button>
                </div>
            </div>
        </div>

        <!-- Replace Modal -->
        <div class="modal-overlay" id="replaceModal">
            <div class="modal">
                <h2>Find and Replace</h2>
                <input
                    type="text"
                    id="replaceFind"
                    placeholder="Find text..."
                />
                <input
                    type="text"
                    id="replaceWith"
                    placeholder="Replace with..."
                />
                <div class="modal-buttons">
                    <button
                        class="btn btn-secondary"
                        onclick="closeReplaceModal()"
                    >
                        Cancel
                    </button>
                    <button class="btn btn-primary" onclick="replaceNext()">
                        Replace
                    </button>
                    <button class="btn btn-primary" onclick="replaceAll()">
                        Replace All
                    </button>
                </div>
            </div>
        </div>

        <!-- Go to Line Modal -->
        <div class="modal-overlay" id="goToLineModal">
            <div class="modal">
                <h2>Go to Line</h2>
                <input
                    type="number"
                    id="lineNumber"
                    placeholder="Line number..."
                    min="1"
                />
                <div class="modal-buttons">
                    <button
                        class="btn btn-secondary"
                        onclick="closeGoToLineModal()"
                    >
                        Cancel
                    </button>
                    <button class="btn btn-primary" onclick="goToLine()">
                        Go
                    </button>
                </div>
            </div>
        </div>

        <!-- Word Count Modal -->
        <div class="modal-overlay" id="wordCountModal">
            <div class="modal">
                <h2>Document Statistics</h2>
                <div id="wordCountStats"></div>
                <div class="modal-buttons">
                    <button
                        class="btn btn-primary"
                        onclick="closeWordCountModal()"
                    >
                        Close
                    </button>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="modal-overlay" id="helpModal">
            <div class="modal" style="min-width: 600px">
                <h2>Writers CLI Help</h2>
                <div class="help-content">
                    <h3>Keyboard Shortcuts</h3>
                    <table>
                        <tr>
                            <th>Shortcut</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+S</kbd></td>
                            <td>Save file</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+O</kbd></td>
                            <td>Open file</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+N</kbd></td>
                            <td>New file</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+X</kbd></td>
                            <td>Exit</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+Z</kbd></td>
                            <td>Undo</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+Y</kbd></td>
                            <td>Redo</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+A</kbd></td>
                            <td>Select all</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+F</kbd></td>
                            <td>Find</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+R</kbd></td>
                            <td>Replace</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+G</kbd></td>
                            <td>Go to line</td>
                        </tr>
                        <tr>
                            <td><kbd>Ctrl+W</kbd></td>
                            <td>Word count</td>
                        </tr>
                        <tr>
                            <td><kbd>F11</kbd></td>
                            <td>Distraction-free mode</td>
                        </tr>
                        <tr>
                            <td><kbd>Esc</kbd></td>
                            <td>Navigation mode</td>
                        </tr>
                        <tr>
                            <td><kbd>i</kbd></td>
                            <td>Insert mode (from navigation)</td>
                        </tr>
                    </table>

                    <h3>Navigation Mode</h3>
                    <p>
                        Press <kbd>Esc</kbd> to enter navigation mode,
                        <kbd>i</kbd> to return to insert mode.
                    </p>
                    <table>
                        <tr>
                            <th>Key</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td><kbd>w</kbd>, <kbd>k</kbd>, <kbd>↑</kbd></td>
                            <td>Move up</td>
                        </tr>
                        <tr>
                            <td><kbd>s</kbd>, <kbd>j</kbd>, <kbd>↓</kbd></td>
                            <td>Move down</td>
                        </tr>
                        <tr>
                            <td><kbd>a</kbd>, <kbd>h</kbd>, <kbd>←</kbd></td>
                            <td>Move left</td>
                        </tr>
                        <tr>
                            <td><kbd>d</kbd>, <kbd>l</kbd>, <kbd>→</kbd></td>
                            <td>Move right</td>
                        </tr>
                    </table>

                    <h3>Features</h3>
                    <ul>
                        <li>
                            <strong>Auto-save:</strong> Your work is
                            automatically saved every 30 seconds
                        </li>
                        <li>
                            <strong>Word tracking:</strong> Real-time word and
                            character count
                        </li>
                        <li>
                            <strong>Distraction-free:</strong> Press F11 for
                            focused writing
                        </li>
                        <li>
                            <strong>Search:</strong> Find and replace text
                            across your document
                        </li>
                        <li>
                            <strong>Undo/Redo:</strong> Full editing history
                            with Ctrl+Z/Ctrl+Y
                        </li>
                    </ul>
                </div>
                <div class="modal-buttons">
                    <button class="btn btn-primary" onclick="closeHelpModal()">
                        Close
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div class="loading" id="loading">
            <div>Loading...</div>
        </div>

        <script src="renderer.js"></script>
    </body>
</html>
