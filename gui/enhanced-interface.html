<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
    <title>Writers CLI - Enhanced Edition</title>

    <!-- Enhanced Styles -->
    <link rel="stylesheet" href="styles/enhanced-main.css">
    <link rel="stylesheet" href="styles/enhanced-themes.css">
    <link rel="stylesheet" href="styles/enhanced-components.css">
    <link rel="stylesheet" href="styles/enhanced-editor.css">
    <link rel="stylesheet" href="styles/enhanced-modals.css">
    <link rel="stylesheet" href="styles/enhanced-animations.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600&family=Source+Serif+Pro:wght@400;600&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="theme-dark" data-platform="electron">
    <!-- Enhanced Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <i class="fas fa-feather-alt"></i>
            </div>
            <div class="loading-spinner"></div>
            <h2>Writers CLI Enhanced</h2>
            <p id="loading-text">Initializing writing environment...</p>
            <div class="loading-progress">
                <div class="loading-progress-bar" id="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="app" class="app hidden">
        <!-- Enhanced Title Bar -->
        <div id="titlebar" class="titlebar" data-platform-specific>
            <div class="titlebar-content">
                <div class="titlebar-left">
                    <div class="app-icon">
                        <i class="fas fa-feather-alt"></i>
                    </div>
                    <div class="titlebar-title">
                        <span id="window-title">Writers CLI Enhanced</span>
                    </div>
                </div>
                <div class="titlebar-center">
                    <div class="breadcrumb" id="breadcrumb">
                        <span class="breadcrumb-item active">Welcome</span>
                    </div>
                </div>
                <div class="titlebar-right">
                    <div class="status-indicators">
                        <div class="status-indicator" id="sync-status" title="Sync Status">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="status-indicator" id="collaboration-status" title="Collaboration">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="status-indicator" id="writing-session" title="Writing Session">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="titlebar-controls">
                        <button id="minimize-btn" class="titlebar-btn" title="Minimize">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button id="maximize-btn" class="titlebar-btn" title="Maximize">
                            <i class="fas fa-square"></i>
                        </button>
                        <button id="close-btn" class="titlebar-btn close" title="Close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Sidebar -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <div class="project-info">
                    <h3 id="project-name">No Project</h3>
                    <span id="project-stats">Select or create a project</span>
                </div>
                <div class="sidebar-actions">
                    <button id="new-project-btn" class="icon-btn" title="New Project">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button id="open-project-btn" class="icon-btn" title="Open Project">
                        <i class="fas fa-folder-open"></i>
                    </button>
                    <button id="collapse-sidebar-btn" class="icon-btn" title="Collapse Sidebar">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
            </div>

            <!-- Enhanced Navigation Tabs -->
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="files">
                    <i class="fas fa-file-alt"></i>
                    <span>Files</span>
                </button>
                <button class="nav-tab" data-tab="outline">
                    <i class="fas fa-list"></i>
                    <span>Outline</span>
                </button>
                <button class="nav-tab" data-tab="characters">
                    <i class="fas fa-user-friends"></i>
                    <span>Characters</span>
                </button>
                <button class="nav-tab" data-tab="research">
                    <i class="fas fa-search"></i>
                    <span>Research</span>
                </button>
                <button class="nav-tab" data-tab="timeline">
                    <i class="fas fa-timeline"></i>
                    <span>Timeline</span>
                </button>
                <button class="nav-tab" data-tab="stats">
                    <i class="fas fa-chart-bar"></i>
                    <span>Stats</span>
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Files Tab -->
                <div id="files-tab" class="tab-pane active">
                    <div class="section">
                        <div class="section-header">
                            <h4></h4>Chapters</h4>
                            <button class="add-btn" data-type="chapter">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="file-tree" id="chapters-tree">
                            <div class="empty-message">
                                <i class="fas fa-book-open"></i>
                                <p>No chapters yet</p>
                                <button class="btn btn-primary" data-action="new-chapter">
                                    Create First Chapter
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">
                            <h4>Notes</h4>
                            <button class="add-btn" data-type="note">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="file-tree" id="notes-tree">
                            <div class="empty-message">
                                <i class="fas fa-sticky-note"></i>
                                <p>No notes yet</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Outline Tab -->
                <div id="outline-tab" class="tab-pane">
                    <div class="outline-container">
                        <div class="outline-toolbar">
                            <button class="btn btn-sm" id="expand-all-outline">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                            <button class="btn btn-sm" id="collapse-all-outline">
                                <i class="fas fa-compress-alt"></i>
                            </button>
                            <button class="btn btn-sm" id="auto-generate-outline">
                                <i class="fas fa-magic"></i>
                            </button>
                        </div>
                        <div class="outline-tree" id="outline-tree">
                            <div class="empty-message">
                                <i class="fas fa-sitemap"></i>
                                <p>No outline available</p>
                                <p class="small">Open a document to generate outline</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Characters Tab -->
                <div id="characters-tab" class="tab-pane">
                    <div class="characters-container">
                        <div class="characters-toolbar">
                            <button class="btn btn-primary" id="add-character-btn">
                                <i class="fas fa-user-plus"></i>
                                Add Character
                            </button>
                            <div class="character-filters">
                                <select id="character-filter">
                                    <option value="all">All Characters</option>
                                    <option value="main">Main Characters</option>
                                    <option value="supporting">Supporting</option>
                                    <option value="minor">Minor</option>
                                </select>
                            </div>
                        </div>
                        <div class="characters-grid" id="characters-grid">
                            <div class="empty-message">
                                <i class="fas fa-user-friends"></i>
                                <p>No characters yet</p>
                                <button class="btn btn-primary" data-action="add-character">
                                    Create First Character
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Research Tab -->
                <div id="research-tab" class="tab-pane">
                    <div class="research-container">
                        <div class="research-toolbar">
                            <input type="text" id="research-search" placeholder="Search research notes...">
                            <button class="btn btn-primary" id="add-research-btn">
                                <i class="fas fa-plus"></i>
                                Add Research
                            </button>
                        </div>
                        <div class="research-grid" id="research-grid">
                            <div class="empty-message">
                                <i class="fas fa-search"></i>
                                <p>No research notes yet</p>
                                <button class="btn btn-primary" data-action="add-research">
                                    Add First Research Note
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timeline Tab -->
                <div id="timeline-tab" class="tab-pane">
                    <div class="timeline-container">
                        <div class="timeline-toolbar">
                            <button class="btn btn-primary" id="add-timeline-event">
                                <i class="fas fa-plus"></i>
                                Add Event
                            </button>
                            <div class="timeline-view-controls">
                                <button class="btn btn-sm active" data-view="chronological">
                                    <i class="fas fa-clock"></i>
                                    Chronological
                                </button>
                                <button class="btn btn-sm" data-view="story">
                                    <i class="fas fa-book"></i>
                                    Story Order
                                </button>
                            </div>
                        </div>
                        <div class="timeline-view" id="timeline-view">
                            <div class="empty-message">
                                <i class="fas fa-timeline"></i>
                                <p>No timeline events yet</p>
                                <button class="btn btn-primary" data-action="add-timeline-event">
                                    Create First Event
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Tab -->
                <div id="stats-tab" class="tab-pane">
                    <div class="stats-container">
                        <div class="stats-overview">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-file-word"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="total-words">0</div>
                                    <div class="stat-label">Total Words</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="total-chapters">0</div>
                                    <div class="stat-label">Chapters</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="reading-time">0m</div>
                                    <div class="stat-label">Reading Time</div>
                                </div>
                            </div>
                        </div>

                        <div class="writing-goals">
                            <h4>Writing Goals</h4>
                            <div class="goal-progress">
                                <div class="goal-item">
                                    <span>Daily Goal</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="daily-progress"></div>
                                    </div>
                                    <span id="daily-progress-text">0 / 500 words</span>
                                </div>
                                <div class="goal-item">
                                    <span>Session Goal</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="session-progress"></div>
                                    </div>
                                    <span id="session-progress-text">0 / 250 words</span>
                                </div>
                            </div>
                        </div>

                        <div class="writing-history">
                            <h4>Writing History</h4>
                            <div class="history-chart" id="writing-history-chart">
                                <canvas id="history-canvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Main Content -->
        <div id="main-content" class="main-content">
            <!-- Enhanced Toolbar -->
            <div id="toolbar" class="toolbar">
                <div class="toolbar-left">
                    <div class="file-info">
                        <span id="current-file-name">Welcome</span>
                        <span id="file-modified-indicator" class="hidden">●</span>
                    </div>
                    <div class="mode-indicator" id="mode-indicator">
                        <span>INSERT</span>
                    </div>
                </div>

                <div class="toolbar-center">
                    <div class="writing-timer" id="writing-timer" title="Writing Timer">
                        <i class="fas fa-stopwatch"></i>
                        <span id="timer-display">00:00</span>
                    </div>
                    <div class="pomodoro-timer" id="pomodoro-timer" title="Pomodoro Timer">
                        <i class="fas fa-tomato"></i>
                        <span id="pomodoro-display">25:00</span>
                        <button id="pomodoro-toggle" class="timer-btn">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>

                <div class="toolbar-right">
                    <div class="toolbar-actions">
                        <button class="toolbar-btn" id="word-count-btn" title="Word Count (Ctrl+W)">
                            <i class="fas fa-calculator"></i>
                        </button>
                        <button class="toolbar-btn" id="find-btn" title="Find (Ctrl+F)">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="toolbar-btn" id="theme-toggle-btn" title="Toggle Theme">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="toolbar-btn" id="focus-mode-btn" title="Focus Mode (F11)">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </button>
                        <button class="toolbar-btn" id="split-view-btn" title="Split View">
                            <i class="fas fa-columns"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Enhanced Editor Area -->
            <div id="editor-area" class="editor-area">
                <!-- Welcome Screen -->
                <div id="welcome-screen" class="welcome-screen">
                    <div class="welcome-content">
                        <div class="welcome-header">
                            <div class="welcome-icon">
                                <i class="fas fa-feather-alt"></i>
                            </div>
                            <h1>Welcome to Writers CLI Enhanced</h1>
                            <p>Your ultimate writing companion with advanced features</p>
                        </div>

                        <div class="quick-actions">
                            <div class="action-section">
                                <h3>Get Started</h3>
                                <div class="action-grid">
                                    <button class="quick-action" data-action="new-project">
                                        <i class="fas fa-plus-circle"></i>
                                        <span>New Project</span>
                                        <small>Start a new writing project</small>
                                    </button>
                                    <button class="quick-action" data-action="open-project">
                                        <i class="fas fa-folder-open"></i>
                                        <span>Open Project</span>
                                        <small>Open existing project</small>
                                    </button>
                                    <button class="quick-action" data-action="import-project">
                                        <i class="fas fa-file-import"></i>
                                        <span>Import Project</span>
                                        <small>Import from other formats</small>
                                    </button>
                                </div>
                            </div>

                            <div class="action-section">
                                <h3>Recent Projects</h3>
                                <div class="recent-projects" id="recent-projects">
                                    <div class="empty-message">
                                        <p>No recent projects</p>
                                    </div>
                                </div>
                            </div>

                            <div class="action-section">
                                <h3>Templates</h3>
                                <div class="template-grid">
                                    <button class="template-card" data-template="novel">
                                        <i class="fas fa-book"></i>
                                        <span>Novel</span>
                                    </button>
                                    <button class="template-card" data-template="short-story">
                                        <i class="fas fa-file-alt"></i>
                                        <span>Short Story</span>
                                    </button>
                                    <button class="template-card" data-template="screenplay">
                                        <i class="fas fa-film"></i>
                                        <span>Screenplay</span>
                                    </button>
                                    <button class="template-card" data-template="blog">
                                        <i class="fas fa-blog"></i>
                                        <span>Blog Post</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="welcome-footer">
                            <p>Need help getting started? <a href="#" id="show-tutorial">Take the quick tour</a></p>
                        </div>
                    </div>
                </div>

                <!-- Main Editor -->
                <div id="editor-container" class="editor-container hidden">
                    <div class="editor-tabs" id="editor-tabs">
                        <!-- Dynamic tabs will be inserted here -->
                    </div>

                    <div class="editor-workspace">
                        <!-- Single Editor View -->
                        <div id="single-editor" class="editor-view active">
                            <textarea id="main-editor" class="editor" placeholder="Start writing your story..."></textarea>
                            <div class="editor-gutter" id="editor-gutter">
                                <!-- Line numbers and annotations -->
                            </div>
                        </div>

                        <!-- Split Editor View -->
                        <div id="split-editor" class="editor-view split-view">
                            <div class="editor-pane left-pane">
                                <textarea id="left-editor" class="editor" placeholder="Left editor..."></textarea>
                                <div class="editor-gutter" id="left-gutter"></div>
                            </div>
                            <div class="editor-splitter"></div>
                            <div class="editor-pane right-pane">
                                <textarea id="right-editor" class="editor" placeholder="Right editor..."></textarea>
                                <div class="editor-gutter" id="right-gutter"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Commenting System -->
                    <div class="comments-panel" id="comments-panel">
                        <div class="comments-header">
                            <h4>Comments</h4>
                            <button class="close-panel-btn" id="close-comments">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="comments-list" id="comments-list">
                            <!-- Comments will be dynamically loaded -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Status Bar -->
            <div id="status-bar" class="status-bar">
                <div class="status-left">
                    <span id="cursor-position">Ln 1, Col 1</span>
                    <span id="selection-info" class="hidden"></span>
                    <span id="document-stats">0 words • 0 chars</span>
                </div>

                <div class="status-center">
                    <div class="sync-status" id="sync-status-indicator">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Synced</span>
                    </div>
                </div>

                <div class="status-right">
                    <span id="file-encoding">UTF-8</span>
                    <span id="line-endings">LF</span>
                    <span id="language-mode">Markdown</span>
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoom-out">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <span id="zoom-level">100%</span>
                        <button class="zoom-btn" id="zoom-in">
                            <i class="fas fa-search-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal System -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <!-- Find Dialog -->
        <div id="find-modal" class="modal find-modal">
            <div class="modal-header">
                <h3>Find</h3>
                <button class="modal-close" data-modal="find">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="search-input-group">
                    <input type="text" id="find-input" placeholder="Find...">
                    <div class="search-options">
                        <label>
                            <input type="checkbox" id="case-sensitive"> Case sensitive
                        </label>
                        <label>
                            <input type="checkbox" id="whole-word"> Whole word
                        </label>
                        <label>
                            <input type="checkbox" id="regex-search"> Regex
                        </label>
                    </div>
                </div>
                <div class="search-results" id="search-results">
                    <span class="results-count">No results</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="find-previous">
                    <i class="fas fa-chevron-up"></i> Previous
                </button>
                <button class="btn btn-secondary" id="find-next">
                    <i class="fas fa-chevron-down"></i> Next
                </button>
                <button class="btn btn-primary" id="find-all">Find All</button>
            </div>
        </div>

        <!-- Replace Dialog -->
        <div id="replace-modal" class="modal replace-modal">
            <div class="modal-header">
                <h3>Find and Replace</h3>
                <button class="modal-close" data-modal="replace">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>Find:</label>
                    <input type="text" id="replace-find" placeholder="Find...">
                </div>
                <div class="input-group">
                    <label>Replace:</label>
                    <input type="text" id="replace-with" placeholder="Replace with...">
                </div>
                <div class="search-options">
                    <label>
                        <input type="checkbox" id="replace-case-sensitive"> Case sensitive
                    </label>
                    <label>
                        <input type="checkbox" id="replace-whole-word"> Whole word
                    </label>
                    <label>
                        <input type="checkbox" id="replace-regex"> Regex
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="replace-one">Replace</button>
                <button class="btn btn-primary" id="replace-all">Replace All</button>
            </div>
        </div>

        <!-- Word Count Modal -->
        <div id="word-count-modal" class="modal word-count-modal">
            <div class="modal-header">
                <h3>Document Statistics</h3>
                <button class="modal-close" data-modal="word-count">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Words:</span>
                        <span class="stat-value" id="modal-word-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Characters:</span>
                        <span class="stat-value" id="modal-char-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Characters (no spaces):</span>
                        <span class="stat-value" id="modal-char-no-spaces">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Paragraphs:</span>
                        <span class="stat-value" id="modal-paragraph-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Lines:</span>
                        <span class="stat-value" id="modal-line-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Reading time:</span>
                        <span class="stat-value" id="modal-reading-time">0 min</span>
                    </div>
                </div>
            </div>
        </div></label>

        <!-- Writing Goals Modal -->
        <div id="writing-goals-modal" class="modal writing-goals-modal">
            <div class="modal-header">
                <h3>Writing Goals</h3>
                <button class="modal-close" data-modal="writing-goals">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="goal-section">
                    <h4>Daily Goals</h4>
                    <div class="input-group">
                        <label>Word Count Goal:</label>
                        <input type="number" id="daily-word-goal" min="0" value="500">
                    </div>
                    <div class="input-group">
                        <label>Time Goal (minutes):</label>
                        <input type="number" id="daily-time-goal" min="0" value="60">
                    </div>
                </div>
                <div class="goal-section">
                    <h4>Session Goals</h4>
                    <div class="input-group">
                        <label>Word Count Goal:</label>
                        <input type="number" id="session-word-goal" min="0" value="250">
                    </div>
                    <div class="input-group">
                        <label>Time Goal (minutes):</label>
                        <input type="number" id="session-time-goal" min="0" value="25">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="writing-goals">Cancel</button>
                <button class="btn btn-primary" id="save-goals">Save Goals</button>
            </div>
        </div>

        <!-- Export Modal -->
        <div id="export-modal" class="modal export-modal">
            <div class="modal-header">
                <h3>Export Project</h3>
                <button class="modal-close" data-modal="export">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <div class="format-selection">
                        <h4>Export Format</h4>
                        <div class="format-grid">
                            <label class="format-option">
                                <input type="radio" name="export-format" value="pdf" checked>
                                <div class="format-card">
                                    <i class="fas fa-file-pdf"></i>
                                    <span>PDF</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="export-format" value="epub">
                                <div class="format-card">
                                    <i class="fas fa-book"></i>
                                    <span>EPUB</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="export-format" value="docx">
                                <div class="format-card">
                                    <i class="fas fa-file-word"></i>
                                    <span>DOCX</span>
                                </div>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="export-format" value="html">
                                <div class="format-card">
                                    <i class="fas fa-code"></i>
                                    <span>HTML</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="export-scope">
                        <h4>Export Scope</h4>
                        <div class="scope-options">
                            <label>
                                <input type="radio" name="export-scope" value="all" checked>
                                Entire Project
                            </label>
                            <label>
                                <input type="radio" name="export-scope" value="current">
                                Current Document
                            </label>
                            <label>
                                <input type="radio" name="export-scope" value="selection">
                                Selected Chapters
                            </label>
                        </div>
                    </div>

                    <div class="export-settings">
                        <h4>Settings</h4>
                        <div class="settings-grid">
                            <label>
                                <input type="checkbox" id="include-title-page" checked>
                                Include title page
                            </label>
                            <label>
                                <input type="checkbox" id="include-toc" checked>
                                Include table of contents
                            </label>
                            <label>
                                <input type="checkbox" id="include-metadata">
                                Include metadata
                            </label>
                            <label>
                                <input type="checkbox" id="include-comments">
                                Include comments
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="export">Cancel</button>
                <button class="btn btn-primary" id="start-export">
                    <i class="fas fa-download"></i> Export
                </button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal settings-modal large-modal">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" data-modal="settings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-sidebar">
                    <div class="settings-nav">
                        <button class="settings-nav-item active" data-section="general">
                            <i class="fas fa-cog"></i> General
                        </button>
                        <button class="settings-nav-item" data-section="editor">
                            <i class="fas fa-edit"></i> Editor
                        </button>
                        <button class="settings-nav-item" data-section="appearance">
                            <i class="fas fa-palette"></i> Appearance
                        </button>
                        <button class="settings-nav-item" data-section="writing">
                            <i class="fas fa-pen"></i> Writing
                        </button>
                        <button class="settings-nav-item" data-section="collaboration">
                            <i class="fas fa-users"></i> Collaboration
                        </button>
                        <button class="settings-nav-item" data-section="backup">
                            <i class="fas fa-save"></i> Backup
                        </button>
                        <button class="settings-nav-item" data-section="export">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="settings-nav-item" data-section="advanced">
                            <i class="fas fa-cogs"></i> Advanced
                        </button>
                    </div>
                </div>
                <div class="settings-content">
                    <div id="settings-general" class="settings-section active">
                        <!-- General settings content -->
                    </div>
                    <div id="settings-editor" class="settings-section">
                        <!-- Editor settings content -->
                    </div>
                    <div id="settings-appearance" class="settings-section">
                        <!-- Appearance settings content -->
                    </div>
                    <div id="settings-writing" class="settings-section">
                        <!-- Writing settings content -->
                    </div>
                    <div id="settings-collaboration" class="settings-section">
                        <!-- Collaboration settings content -->
                    </div>
                    <div id="settings-backup" class="settings-section">
                        <!-- Backup settings content -->
                    </div>
                    <div id="settings-export" class="settings-section">
                        <!-- Export settings content -->
                    </div>
                    <div id="settings-advanced" class="settings-section">
                        <!-- Advanced settings content -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="settings">Cancel</button>
                <button class="btn btn-primary" id="save-settings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification-container" class="notification-container">
        <!-- Notifications will be dynamically inserted here -->
    </div>

    <!-- Context Menus -->
    <div id="context-menu" class="context-menu hidden">
        <!-- Context menu items will be dynamically inserted -->
    </div>

    <!-- Progress Indicators -->
    <div id="progress-overlay" class="progress-overlay hidden">
        <div class="progress-modal">
            <div class="progress-content">
                <h3 id="progress-title">Processing...</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p id="progress-text">Please wait...</p>
                <button class="btn btn-secondary" id="cancel-progress">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="src/renderer/enhanced-app.js"></script>
    <script src="src/renderer/services/enhanced-editor.js"></script>
    <script src="src/renderer/services/enhanced-project-manager.js"></script>
    <script src="src/renderer/services/enhanced-collaboration.js"></script>
    <script src="src/renderer/services/enhanced-export.js"></script>
    <script src="src/renderer/utils/enhanced-helpers.js"></script>
</body>
</html>
